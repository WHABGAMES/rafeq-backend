// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ”§ FIX H3: WebSocket CORS - ØªØºÙŠÙŠØ± Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù„ÙˆÙŠ ÙÙ‚Ø· Ù…Ù† app.gateway.ts
//
// Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ:
//
//   @WebSocketGateway({
//     cors: {
//       origin: '*',
//       credentials: true,
//     },
//     namespace: '/ws',
//     transports: ['websocket', 'polling'],
//   })
//
// ÙˆØ§Ø³ØªØ¨Ø¯Ù„Ù‡ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠ:
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ù€ import ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ù:
// import { ConfigService } from '@nestjs/config';

// Ø«Ù… Ø§Ø³ØªØ¨Ø¯Ù„ decorator Ø§Ù„Ù€ @WebSocketGateway:

@WebSocketGateway({
  cors: {
    // ğŸ”§ FIX H3: Ù†ÙØ³ whitelist Ø§Ù„Ù€ HTTP CORS
    origin: (process.env.CORS_ORIGINS || 'https://rafeq.ai,https://www.rafeq.ai')
      .split(',')
      .map(o => o.trim())
      .concat(
        process.env.NODE_ENV !== 'production'
          ? ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:5173']
          : []
      ),
    credentials: true,
  },
  namespace: '/ws',
  transports: ['websocket', 'polling'],
})

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ù„Ù ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡Ùˆ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
