/**
 * â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 * â•‘              RAFIQ PLATFORM - Tenants Module                                   â•‘
 * â•‘                                                                                â•‘
 * â•‘  ğŸ“Œ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† (Multi-tenancy)                                           â•‘
 * â•‘                                                                                â•‘
 * â•‘  Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø± (Tenant) = Ø§Ù„Ø´Ø±ÙƒØ©/Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø°ÙŠ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†ØµØ©                           â•‘
 * â•‘                                                                                â•‘
 * â•‘  Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:                                                                   â•‘
 * â•‘  - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±                                                           â•‘
 * â•‘  - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI                                                                 â•‘
 * â•‘  - ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…                                                             â•‘
 * â•‘  - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª                                                           â•‘
 * â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ConfigModule } from '@nestjs/config';

import { Tenant } from '@database/entities';
import { TenantsController } from './tenants.controller';
import { TenantsService } from './tenants.service';

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“Œ Multi-tenancy ÙÙŠ Ø±ÙÙŠÙ‚:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * Ù†Ø³ØªØ®Ø¯Ù… Row-level Isolation:
 * - ÙƒÙ„ Ø¬Ø¯ÙˆÙ„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ tenant_id
 * - ÙƒÙ„ query ØªÙÙÙ„ØªØ± Ø¨Ù€ tenant_id
 * - Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù„Ù…Ø³ØªØ£Ø¬Ø± Ø±Ø¤ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ£Ø¬Ø± Ø¢Ø®Ø±
 * 
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚                         TENANT HIERARCHY                                    â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚                                                                             â”‚
 * â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
 * â”‚                         â”‚    Tenant    â”‚                                    â”‚
 * â”‚                         â”‚  (Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±)   â”‚                                    â”‚
 * â”‚                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
 * â”‚                                â”‚                                            â”‚
 * â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
 * â”‚         â”‚                      â”‚                      â”‚                    â”‚
 * â”‚         â–¼                      â–¼                      â–¼                    â”‚
 * â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
 * â”‚  â”‚    Users     â”‚    â”‚    Stores    â”‚    â”‚   Channels   â”‚                 â”‚
 * â”‚  â”‚  (Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†)  â”‚    â”‚  (Ø§Ù„Ù…ØªØ§Ø¬Ø±)   â”‚    â”‚  (Ø§Ù„Ù‚Ù†ÙˆØ§Øª)   â”‚                 â”‚
 * â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
 * â”‚                             â”‚                                              â”‚
 * â”‚                             â–¼                                              â”‚
 * â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
 * â”‚                      â”‚  Customers   â”‚                                      â”‚
 * â”‚                      â”‚  (Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡)   â”‚                                      â”‚
 * â”‚                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
 * â”‚                             â”‚                                              â”‚
 * â”‚                             â–¼                                              â”‚
 * â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
 * â”‚         â”‚              Conversations               â”‚                      â”‚
 * â”‚         â”‚              (Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª)                  â”‚                      â”‚
 * â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
 * â”‚                                                                             â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * ÙƒÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù€ tenant_id
 */

@Module({
  imports: [
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ“ Database
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    TypeOrmModule.forFeature([Tenant]),
    
    ConfigModule,
  ],

  controllers: [TenantsController],

  providers: [TenantsService],

  exports: [
    // Ù†ØµØ¯Ù‘Ø± Ø§Ù„Ù€ Service Ù„ÙŠÙØ³ØªØ®Ø¯Ù… ÙÙŠ:
    // - AuthModule (Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„)
    // - BillingModule (Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ)
    // - Guards (Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯)
    TenantsService,
  ],
})
export class TenantsModule {}

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“Œ ÙƒÙŠÙ Ù†Ø­Ù…ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ†:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * 1. JWT Token ÙŠØ­ØªÙˆÙŠ tenant_id:
 *    {
 *      sub: 'user-uuid',
 *      email: 'user@example.com',
 *      tenantId: 'tenant-uuid',  â† Ù‡Ø°Ø§
 *      role: 'owner'
 *    }
 * 
 * 2. Middleware ÙŠØ³ØªØ®Ø±Ø¬ tenant_id Ù…Ù† Ø§Ù„Ù€ token:
 *    request.tenantId = payload.tenantId;
 * 
 * 3. ÙƒÙ„ Service ÙŠØ³ØªØ®Ø¯Ù… tenant_id ÙÙŠ queries:
 *    this.userRepository.find({
 *      where: { tenantId }  â† Ø¯Ø§Ø¦Ù…Ø§Ù‹!
 *    });
 * 
 * 4. Guard ÙŠØªØ­Ù‚Ù‚ Ù…Ù† tenant_id:
 *    - Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ†ØªÙ…ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ØŸ
 *    - Ù‡Ù„ Ø§Ù„Ù€ resource ÙŠÙ†ØªÙ…ÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ØŸ
 * 
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ğŸ“Œ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * 
 * 1. ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯:
 *    - Ù†Ù†Ø´Ø¦ Tenant Ø¬Ø¯ÙŠØ¯
 *    - Ù†Ù†Ø´Ø¦ User (owner) Ù…Ø±ØªØ¨Ø· Ø¨Ù‡
 *    - Ù†ÙØ¹Ù‘Ù„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© (14 ÙŠÙˆÙ…)
 * 
 * 2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:
 *    - Ù†ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
 *    - Ù†ÙØ±Ø¬Ø¹ JWT ÙŠØ­ØªÙˆÙŠ tenant_id
 * 
 * 3. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©:
 *    - Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ
 *    - Ù†Ø²ÙŠØ¯ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
 * 
 * 4. Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:
 *    - Ù†ÙˆÙ‚Ù Ø§Ù„Ù‚Ù†ÙˆØ§Øª (INACTIVE)
 *    - Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
 *    - Ù„Ø§ Ù†Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
 */
