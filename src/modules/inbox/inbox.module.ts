/**
 * ╔═══════════════════════════════════════════════════════════════════════════════╗
 * ║              RAFIQ PLATFORM - Inbox Module                                     ║
 * ║                                                                                ║
 * ║  📌 صندوق الوارد الموحد - إدارة جميع المحادثات من مكان واحد                      ║
 * ║                                                                                ║
 * ║  الميزات:                                                                      ║
 * ║  - عرض جميع المحادثات من كل القنوات                                            ║
 * ║  - فلترة وبحث المحادثات                                                        ║
 * ║  - تعيين المحادثات للموظفين                                                    ║
 * ║  - إدارة حالات المحادثات                                                       ║
 * ║  - Real-time updates                                                          ║
 * ╚═══════════════════════════════════════════════════════════════════════════════╝
 */

import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ConfigModule } from '@nestjs/config';

import { Conversation, Message, User, Customer } from '@database/entities';
import { InboxService } from './inbox.service';
import { InboxController } from './inbox.controller';

/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * 📌 Unified Inbox Concept:
 * ═══════════════════════════════════════════════════════════════════════════════
 * 
 * صندوق الوارد الموحد = واجهة واحدة لجميع قنوات التواصل
 * 
 * ┌─────────────────────────────────────────────────────────────────────────────┐
 * │                         UNIFIED INBOX                                       │
 * ├─────────────────────────────────────────────────────────────────────────────┤
 * │                                                                             │
 * │  ┌──────────────────────────────────────────────────────────────────────┐  │
 * │  │  🔍 بحث...                         📥 الكل (12) | 🔴 غير مقروء (3)  │  │
 * │  └──────────────────────────────────────────────────────────────────────┘  │
 * │                                                                             │
 * │  ┌─────────────────────┬────────────────────────────────────────────────┐  │
 * │  │                     │                                                │  │
 * │  │  📱 أحمد محمد       │  [المحادثة]                                   │  │
 * │  │  WhatsApp • 2 دقيقة │                                                │  │
 * │  │  "أين طلبي؟"       │  أحمد: أين طلبي؟                              │  │
 * │  │  ─────────────────  │                                                │  │
 * │  │  📸 سارة علي        │  🤖 AI: مرحباً أحمد! رقم طلبك 12345          │  │
 * │  │  Instagram • 5 دقيقة│       تم شحنه وسيصل غداً.                     │  │
 * │  │  "هل المنتج متوفر؟"│                                                │  │
 * │  │  ─────────────────  │  أحمد: شكراً                                  │  │
 * │  │  🎮 خالد أحمد       │                                                │  │
 * │  │  Discord • 10 دقيقة │  ─────────────────────────────────────────    │  │
 * │  │  "مشكلة في الدفع"  │                                                │  │
 * │  │                     │  [✍️ اكتب رسالة...]            [📎] [😊] [📤] │  │
 * │  │                     │                                                │  │
 * │  └─────────────────────┴────────────────────────────────────────────────┘  │
 * │                                                                             │
 * └─────────────────────────────────────────────────────────────────────────────┘
 * 
 * الفوائد:
 * 1. لا حاجة للتنقل بين تطبيقات مختلفة
 * 2. رؤية شاملة لجميع المحادثات
 * 3. توزيع المحادثات على الموظفين
 * 4. تتبع SLA والأداء
 */

@Module({
  imports: [
    TypeOrmModule.forFeature([
      Conversation,  // المحادثات
      Message,       // الرسائل
      User,          // الموظفين (للتعيين)
      Customer,      // العملاء
    ]),
    
    ConfigModule,
  ],

  controllers: [InboxController],
  
  providers: [InboxService],

  exports: [InboxService],
})
export class InboxModule {}

/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * 📌 Inbox Features:
 * ═══════════════════════════════════════════════════════════════════════════════
 * 
 * 1. 📊 Views & Filters:
 *    - الكل (All)
 *    - غير مقروء (Unread)
 *    - معيّن لي (Assigned to me)
 *    - غير معيّن (Unassigned)
 *    - مؤرشف (Archived)
 *    - فلترة بالقناة
 *    - فلترة بالحالة
 * 
 * 2. 👥 Assignment:
 *    - تعيين لموظف معين
 *    - تعيين تلقائي (Round-robin)
 *    - تعيين حسب المهارات
 *    - إعادة تعيين
 * 
 * 3. 🏷️ Organization:
 *    - Tags للمحادثات
 *    - Priority (عادي، مهم، عاجل)
 *    - ملاحظات داخلية
 * 
 * 4. ⏱️ SLA Tracking:
 *    - وقت أول رد
 *    - وقت الحل
 *    - تنبيهات التأخير
 * 
 * 5. 🔔 Real-time:
 *    - رسائل جديدة فورية
 *    - تحديث الحالات
 *    - إشعارات
 */
