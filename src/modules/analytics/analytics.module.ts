/**
 * ╔═══════════════════════════════════════════════════════════════════════════════╗
 * ║              RAFIQ PLATFORM - Analytics Module                                 ║
 * ║                                                                                ║
 * ║  📌 التحليلات والتقارير                                                        ║
 * ║                                                                                ║
 * ║  الميزات:                                                                      ║
 * ║  - إحصائيات المحادثات والرسائل                                                 ║
 * ║  - تحليل أداء الفريق                                                          ║
 * ║  - تقارير الحملات                                                             ║
 * ║  - مؤشرات رضا العملاء                                                         ║
 * ║  - تصدير التقارير                                                             ║
 * ╚═══════════════════════════════════════════════════════════════════════════════╝
 */

import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ConfigModule } from '@nestjs/config';

import {
  Conversation,
  Message,
  Campaign,
  Customer,
  Order,
  User,
} from '@database/entities';

import { AnalyticsService } from './analytics.service';
import { AnalyticsController } from './analytics.controller';

/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * 📌 Analytics Dashboard:
 * ═══════════════════════════════════════════════════════════════════════════════
 * 
 * ┌─────────────────────────────────────────────────────────────────────────────┐
 * │                         ANALYTICS DASHBOARD                                 │
 * ├─────────────────────────────────────────────────────────────────────────────┤
 * │                                                                             │
 * │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐   │
 * │  │   محادثات    │  │   رسائل     │  │   العملاء   │  │  معدل الرد   │   │
 * │  │    اليوم     │  │   اليوم     │  │   الجدد     │  │              │   │
 * │  │              │  │              │  │              │  │              │   │
 * │  │    📈 45     │  │    📈 320   │  │    📈 12    │  │   ⏱️ 3 دق   │   │
 * │  │   +15%       │  │   +25%      │  │   +8%       │  │   -20%       │   │
 * │  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘   │
 * │                                                                             │
 * │  ┌────────────────────────────────────────────────────────────────────┐    │
 * │  │                     📊 الرسائل خلال الأسبوع                        │    │
 * │  │  350 ┤                                                             │    │
 * │  │  300 ┤                              ╭─╮                            │    │
 * │  │  250 ┤                    ╭─╮       │ │    ╭─╮                     │    │
 * │  │  200 ┤          ╭─╮      │ │       │ │    │ │                     │    │
 * │  │  150 ┤  ╭─╮     │ │      │ │       │ │    │ │    ╭─╮              │    │
 * │  │  100 ┤  │ │     │ │      │ │       │ │    │ │    │ │              │    │
 * │  │   50 ┤  │ │     │ │      │ │       │ │    │ │    │ │              │    │
 * │  │    0 └──┴─┴─────┴─┴──────┴─┴───────┴─┴────┴─┴────┴─┴───────────   │    │
 * │  │       السبت  الأحد  الاثنين الثلاثاء الأربعاء الخميس الجمعة        │    │
 * │  └────────────────────────────────────────────────────────────────────┘    │
 * │                                                                             │
 * │  ┌─────────────────────────┐  ┌─────────────────────────────────────┐      │
 * │  │  🏆 أفضل الموظفين       │  │  📱 توزيع القنوات                   │      │
 * │  │                         │  │                                     │      │
 * │  │  1. أحمد    ⭐ 95%      │  │  WhatsApp  ████████████ 65%        │      │
 * │  │  2. سارة    ⭐ 92%      │  │  Instagram ██████      30%        │      │
 * │  │  3. خالد    ⭐ 88%      │  │  Discord   ██           5%        │      │
 * │  └─────────────────────────┘  └─────────────────────────────────────┘      │
 * │                                                                             │
 * └─────────────────────────────────────────────────────────────────────────────┘
 */

@Module({
  imports: [
    TypeOrmModule.forFeature([
      Conversation,
      Message,
      Campaign,
      Customer,
      Order,
      User,
    ]),
    
    ConfigModule,
  ],

  controllers: [AnalyticsController],
  
  providers: [AnalyticsService],

  exports: [AnalyticsService],
})
export class AnalyticsModule {}

/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * 📌 Available Reports:
 * ═══════════════════════════════════════════════════════════════════════════════
 * 
 * 1. 📊 Overview (نظرة عامة)
 *    - إجمالي المحادثات
 *    - إجمالي الرسائل
 *    - عدد العملاء
 *    - معدل الرد
 *    - معدل الحل
 * 
 * 2. 💬 Conversations (المحادثات)
 *    - المحادثات حسب اليوم/الأسبوع/الشهر
 *    - المحادثات حسب القناة
 *    - المحادثات حسب الحالة
 *    - أوقات الذروة
 * 
 * 3. 👥 Team Performance (أداء الفريق)
 *    - عدد المحادثات لكل موظف
 *    - متوسط وقت الرد
 *    - متوسط وقت الحل
 *    - تقييم العملاء
 * 
 * 4. 📣 Campaigns (الحملات)
 *    - نسبة التوصيل
 *    - نسبة القراءة
 *    - نسبة التفاعل
 *    - أفضل أوقات الإرسال
 * 
 * 5. 🤖 AI Performance (أداء الذكاء الاصطناعي)
 *    - نسبة الردود الآلية
 *    - نسبة النجاح
 *    - الأسئلة الأكثر شيوعاً
 *    - حالات التحويل للموظف
 */
