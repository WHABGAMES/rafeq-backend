/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * Ù…Ù„Ù app.module.ts - Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * ğŸ“¦ Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙˆØ­Ø¯Ø© (Module)ØŸ
 * Ø§Ù„ÙˆØ­Ø¯Ø© = Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ù€ Controllers, Services, Entities Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¨Ø¹Ø¶Ù‡Ø§
 *
 * Ù…Ø«Ø§Ù„: ÙˆØ­Ø¯Ø© Users ØªØ­ØªÙˆÙŠ:
 * - UsersController (ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª)
 * - UsersService (ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ù†Ø·Ù‚)
 * - User Entity (ÙŠÙ…Ø«Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„)
 *
 * ğŸŒ³ Ù‡ÙŠÙƒÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª ÙÙŠ Rafiq:
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *                    AppModule (Ø£Ù†Øª Ù‡Ù†Ø§)
 *                         â”‚
 *         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *         â”‚               â”‚               â”‚
 *    ConfigModule    DatabaseModule   FeatureModules
 *         â”‚               â”‚               â”‚
 *    (Ù…ØªØºÙŠØ±Ø§Øª      (TypeORM,       â”œâ”€â”€ AuthModule
 *     Ø§Ù„Ø¨ÙŠØ¦Ø©)       PostgreSQL)    â”œâ”€â”€ UsersModule
 *                                  â”œâ”€â”€ TenantsModule
 *                                  â”œâ”€â”€ StoresModule
 *                                  â”œâ”€â”€ ChannelsModule
 *                                  â”œâ”€â”€ MessagingModule
 *                                  â”œâ”€â”€ AIModule
 *                                  â”œâ”€â”€ CampaignsModule
 *                                  â””â”€â”€ AnalyticsModule
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import { Module, MiddlewareConsumer, NestModule } from '@nestjs/common';
import { ConfigModule, ConfigService } from '@nestjs/config';
import { TypeOrmModule } from '@nestjs/typeorm';
import { CacheModule } from '@nestjs/cache-manager';
import { BullModule } from '@nestjs/bullmq';
import { ScheduleModule } from '@nestjs/schedule';
import { EventEmitterModule } from '@nestjs/event-emitter';
import { ThrottlerModule, ThrottlerGuard } from '@nestjs/throttler';
import { APP_GUARD } from '@nestjs/core';

// Ù…Ù„ÙØ§Øª Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
import configuration from '@config/configuration';
import { typeOrmConfig } from '@config/typeorm.config';

// Middleware
import { RequestLoggerMiddleware } from '@common/middleware/request-logger.middleware';

// Controllers
import { HealthController } from './health.controller';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“¦ Feature Modules - ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Øª
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
import { AuthModule } from '@modules/auth/auth.module';
import { UsersModule } from '@modules/users/users.module';
import { TenantsModule } from '@modules/tenants/tenants.module';
import { StoresModule } from '@modules/stores/stores.module';
import { ChannelsModule } from '@modules/channels/channels.module';
import { WhatsAppModule } from '@modules/channels/whatsapp/whatsapp.module';
import { WebhooksModule } from '@modules/webhooks/webhooks.module';
import { MessagingModule } from '@modules/messaging/messaging.module';
import { AiModule } from '@modules/ai/ai.module';
import { CampaignsModule } from '@modules/campaigns/campaigns.module';
import { InboxModule } from '@modules/inbox/inbox.module';
import { BillingModule } from '@modules/billing/billing.module';
import { AnalyticsModule } from '@modules/analytics/analytics.module';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“¦ NEW Modules - Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
import { TemplatesModule } from '@modules/templates/templates.module';
import { ContactsModule } from '@modules/contacts/contacts.module';
import { AutomationsModule } from '@modules/automations/automations.module';
import { IntegrationsModule } from '@modules/integrations/integrations.module';
import { CsatModule } from '@modules/csat/csat.module';
import { QuickRepliesModule } from '@modules/quick-replies/quick-replies.module';
import { TagsModule } from '@modules/tags/tags.module';
import { SettingsModule } from '@modules/settings/settings.module';
import { GatewayModule } from '@modules/gateway/gateway.module';
import { MailModule } from '@modules/mail/mail.module';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ­Ø¯Ø©
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

/**
 * @Module() - Decorator ÙŠØ­ÙˆÙ„ Ø§Ù„ÙƒÙ„Ø§Ø³ Ø¥Ù„Ù‰ ÙˆØ­Ø¯Ø© NestJS
 *
 * Ø§Ù„Ø®ØµØ§Ø¦Øµ:
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * - imports: Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø³ØªÙˆØ±Ø¯Ù‡Ø§ (Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø§ ÙÙŠÙ‡Ø§)
 * - controllers: Ø§Ù„Ù€ Controllers ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ­Ø¯Ø©
 * - providers: Ø§Ù„Ù€ Services ÙˆØ§Ù„Ù€ Guards ÙˆØ§Ù„Ù€ Pipes ÙˆØºÙŠØ±Ù‡Ø§
 * - exports: Ù…Ø§ Ù†ØµØ¯Ù‘Ø±Ù‡ Ù„Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
 */
@Module({
  imports: [
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 1ï¸âƒ£ ConfigModule - Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * ConfigModule.forRoot() - ØªÙ‡ÙŠØ¦Ø© Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
     *
     * isGlobal: true
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * ÙŠØ¬Ø¹Ù„ ConfigModule Ù…ØªØ§Ø­Ø§Ù‹ ÙÙŠ ÙƒÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª
     * Ø¨Ø¯ÙˆÙ†Ù‡: Ù†Ø­ØªØ§Ø¬ import ÙÙŠ ÙƒÙ„ ÙˆØ­Ø¯Ø©
     * Ù…Ø¹Ù‡: Ù†Ø³ØªØ®Ø¯Ù…Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†
     *
     * load: [configuration]
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * ÙŠØ­Ù…Ù‘Ù„ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø®ØµØµ
     * ÙŠØ­ÙˆÙ‘Ù„ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø³Ø·Ø­Ø© Ø¥Ù„Ù‰ ÙƒØ§Ø¦Ù† Ù…ØªØ¯Ø§Ø®Ù„
     *
     * envFilePath
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * ÙŠØ­Ø¯Ø¯ Ù…Ù„ÙØ§Øª .env Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
     * .env.local ÙŠØªØ¬Ø§ÙˆØ² .env
     *
     * cache: true
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * ÙŠØ®Ø²Ù† Ø§Ù„Ù‚ÙŠÙ… ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø£Ø³Ø±Ø¹
     *
     * expandVariables: true
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * ÙŠØ³Ù…Ø­ Ø¨Ù…ØªØºÙŠØ±Ø§Øª Ø¯Ø§Ø®Ù„ Ù…ØªØºÙŠØ±Ø§Øª
     * Ù…Ø«Ø§Ù„: API_URL=http://${HOST}:${PORT}
     */
    ConfigModule.forRoot({
      isGlobal: true,
      load: [configuration],
      envFilePath: ['.env.local', '.env'],
      cache: true,
      expandVariables: true,
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 2ï¸âƒ£ TypeOrmModule - Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * TypeOrmModule.forRootAsync() - ØªÙ‡ÙŠØ¦Ø© ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†Ø©
     *
     * Ù„Ù…Ø§Ø°Ø§ AsyncØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * Ù†Ø­ØªØ§Ø¬ Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ ConfigService Ù‚Ø¨Ù„ Ø¥Ø¹Ø¯Ø§Ø¯ TypeORM
     *
     * inject: [ConfigService]
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * Ù†Ø·Ù„Ø¨ Ù…Ù† NestJS ØªÙ…Ø±ÙŠØ± ConfigService Ù„Ù„Ù€ factory
     *
     * useFactory
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * Ø¯Ø§Ù„Ø© ØªÙÙ†Ø´Ø¦ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
     * ØªÙÙ†ÙØ° Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
     */
    TypeOrmModule.forRootAsync(typeOrmConfig),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 3ï¸âƒ£ CacheModule - Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * CacheModule - ÙŠØ³Ø±Ù‘Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
     *
     * ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 1. Ø£ÙˆÙ„ Ø·Ù„Ø¨: Ù†Ø¬Ù„Ø¨ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª + Ù†Ø­ÙØ¸ ÙÙŠ Cache
     * 2. Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©: Ù†Ø¬Ù„Ø¨ Ù…Ù† Cache (Ø£Ø³Ø±Ø¹ Ø¨ÙƒØ«ÙŠØ±!)
     * 3. Ø¨Ø¹Ø¯ TTL: Cache ÙŠÙ†ØªÙ‡ÙŠ + Ù†Ø¬Ù„Ø¨ Ù…Ù† Ø¬Ø¯ÙŠØ¯
     *
     * Ù…Ø«Ø§Ù„:
     * - Ø¬Ù„Ø¨ Ù…Ù† PostgreSQL: 50ms
     * - Ø¬Ù„Ø¨ Ù…Ù† Redis Cache: 1ms
     *
     * 50x Ø£Ø³Ø±Ø¹! ğŸš€
     */
    CacheModule.registerAsync({
      isGlobal: true,
      inject: [ConfigService],
      useFactory: async (configService: ConfigService) => {
        const ttl = configService.get<number>('REDIS_CACHE_TTL', 3600);

        // ÙÙŠ Ø§Ù„ØªØ·ÙˆÙŠØ±ØŒ Ù‚Ø¯ Ù„Ø§ ÙŠÙƒÙˆÙ† Redis Ù…ØªØ§Ø­Ø§Ù‹
        // Ù†Ø³ØªØ®Ø¯Ù… cache ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙƒØ¨Ø¯ÙŠÙ„
        if (configService.get<string>('NODE_ENV') === 'development') {
          return {
            ttl: ttl * 1000, // ØªØ­ÙˆÙŠÙ„ Ù„Ù€ milliseconds
          };
        }

        // ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ù†Ø³ØªØ®Ø¯Ù… Redis
        // Ù…Ù„Ø§Ø­Ø¸Ø©: ØªØ­ØªØ§Ø¬ ØªØ«Ø¨ÙŠØª cache-manager-redis-yet
        return {
          // store: redisStore,
          // host: configService.get<string>('REDIS_HOST', 'localhost'),
          // port: configService.get<number>('REDIS_PORT', 6379),
          ttl: ttl * 1000,
        };
      },
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 4ï¸âƒ£ BullModule - Ø·ÙˆØ§Ø¨ÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®Ù„ÙÙŠØ©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * BullModule - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®Ù„ÙÙŠØ©
     *
     * Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®Ù„ÙÙŠØ©ØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * Ø¹Ù…Ù„ÙŠØ§Øª ØªØ³ØªØºØ±Ù‚ ÙˆÙ‚ØªØ§Ù‹ ÙˆÙ„Ø§ Ù†Ø±ÙŠØ¯ Ø£Ù† ÙŠØ¨Ù‚Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ†ØªØ¸Ø±
     *
     * Ø£Ù…Ø«Ù„Ø©:
     * - Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
     * - Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø©
     * - Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© WhatsApp
     * - ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª
     *
     * ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 1. Ø§Ù„Ù€ Controller ÙŠØ¶ÙŠÙ Ù…Ù‡Ù…Ø© Ù„Ù„Ø·Ø§Ø¨ÙˆØ±
     * 2. ÙŠØ±Ø¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙˆØ±Ø§Ù‹ "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨"
     * 3. Ø§Ù„Ù€ Processor ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
     * 4. Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ØŒ ÙŠÙØ­Ø¯Ù‘Ø« Ø§Ù„Ø­Ø§Ù„Ø© Ø£Ùˆ ÙŠØ±Ø³Ù„ Ø¥Ø´Ø¹Ø§Ø±
     *
     * Redis ÙŠØ­ÙØ¸ Ø§Ù„Ø·ÙˆØ§Ø¨ÙŠØ± (Ù„Ø§ ØªØ¶ÙŠØ¹ Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„)
     */
    // âœ… ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡ Ù„Ø¯Ø¹Ù… TLS Ù„Ù€ DigitalOcean Valkey
    BullModule.forRootAsync({
      inject: [ConfigService],
      useFactory: (configService: ConfigService) => {
        const redisHost = configService.get<string>('REDIS_HOST', 'localhost');
        const redisPort = configService.get<number>('REDIS_PORT', 6379);
        const redisPassword = configService.get<string>('REDIS_PASSWORD');
        const isProduction = configService.get<string>('NODE_ENV') === 'production';
        const redisTls = configService.get<string>('REDIS_TLS') === 'true' || isProduction;
        
        return {
          connection: {
            host: redisHost,
            port: redisPort,
            password: redisPassword,
            // TLS Ù…Ø·Ù„ÙˆØ¨ Ù„Ù€ DigitalOcean Managed Redis/Valkey
            ...(redisTls ? { tls: { rejectUnauthorized: false } } : {}),
          },
          // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù…
          defaultJobOptions: {
            // Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ° Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„
            attempts: 3,
            // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ø¨Ø§Ù„Ù€ ms)
            backoff: {
              type: 'exponential', // 1s, 2s, 4s, 8s...
              delay: 1000,
            },
            // Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² (Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ø°Ø§ÙƒØ±Ø©)
            removeOnComplete: true,
            // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙØ§Ø´Ù„Ø© (Ù„Ù„ØªØ­Ù„ÙŠÙ„)
            removeOnFail: false,
          },
        };
      },
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 5ï¸âƒ£ ScheduleModule - Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ù‡Ø§Ù… (Cron Jobs)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * ScheduleModule - ØªÙ†ÙÙŠØ° Ù…Ù‡Ø§Ù… ÙÙŠ Ø£ÙˆÙ‚Ø§Øª Ù…Ø­Ø¯Ø¯Ø©
     *
     * Ø£Ù…Ø«Ù„Ø©:
     * - ÙƒÙ„ Ø³Ø§Ø¹Ø©: ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©
     * - ÙƒÙ„ ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¹Ø© 3 ØµØ¨Ø§Ø­Ø§Ù‹: Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ
     * - ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹: Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ±
     *
     * ÙŠØ³ØªØ®Ø¯Ù… ØµÙŠØºØ© Cron:
     * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ø«Ø§Ù†ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) (0-59)
     * â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ø¯Ù‚ÙŠÙ‚Ø© (0-59)
     * â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€ Ø³Ø§Ø¹Ø© (0-23)
     * â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€ ÙŠÙˆÙ… Ø§Ù„Ø´Ù‡Ø± (1-31)
     * â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€ Ø´Ù‡Ø± (1-12)
     * â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€ ÙŠÙˆÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ (0-7) (0 Ùˆ 7 = Ø§Ù„Ø£Ø­Ø¯)
     * â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
     * * * * * * *
     *
     * Ù…Ø«Ø§Ù„: '0 3 * * *' = ÙƒÙ„ ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¹Ø© 3 ØµØ¨Ø§Ø­Ø§Ù‹
     */
    ScheduleModule.forRoot(),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 6ï¸âƒ£ EventEmitterModule - Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * EventEmitterModule - Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø¹Ø¨Ø± Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
     *
     * Ù„Ù…Ø§Ø°Ø§ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«ØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * - ÙØµÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª (Decoupling)
     * - ØªÙ†ÙÙŠØ° Ù…ØªÙˆØ§Ø²ÙŠ
     * - Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ù„Ø­Ø°Ù
     *
     * Ù…Ø«Ø§Ù„:
     * â”€â”€â”€â”€â”€â”€â”€â”€
     * // Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:
     * this.eventEmitter.emit('order.created', { orderId: 123 });
     *
     * // Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙˆÙ† ÙŠØªÙØ§Ø¹Ù„ÙˆÙ† Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚Ù„:
     * @OnEvent('order.created')
     * handleOrderCreated(payload) {
     *   // Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ ØªØ£ÙƒÙŠØ¯
     * }
     *
     * @OnEvent('order.created')
     * handleInventoryUpdate(payload) {
     *   // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
     * }
     *
     * Ø§Ù„ÙØ§Ø¦Ø¯Ø©: OrderService Ù„Ø§ ÙŠØ¹Ø±Ù Ø´ÙŠØ¦Ø§Ù‹ Ø¹Ù† Email Ø£Ùˆ Inventory
     */
    EventEmitterModule.forRoot({
      // wildcards: true ÙŠØ³Ù…Ø­ Ø¨Ø£Ù†Ù…Ø§Ø· Ù…Ø«Ù„ 'order.*'
      wildcard: true,
      // Ø§Ù„ÙØ§ØµÙ„ Ø¨ÙŠÙ† Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ø­Ø¯Ø«
      delimiter: '.',
      // Ø£Ù‚ØµÙ‰ Ø¹Ø¯Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„ÙƒÙ„ Ø­Ø¯Ø«
      maxListeners: 20,
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 7ï¸âƒ£ ThrottlerModule - Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * ThrottlerModule - Rate Limiting
     *
     * Ù„Ù…Ø§Ø°Ø§ Ù†Ø­ØªØ§Ø¬Ù‡ØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * - Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ù‡Ø¬Ù…Ø§Øª DDoS
     * - Ù…Ù†Ø¹ Brute Force Ø¹Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
     * - ØªÙ‚Ù„ÙŠÙ„ Ø­Ù…Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…
     * - Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯Ø§Ù„Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
     *
     * ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * ÙŠØ­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† ÙƒÙ„ IP Ø®Ù„Ø§Ù„ ÙØªØ±Ø© Ù…Ø¹ÙŠÙ†Ø©
     * Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ØŒ ÙŠÙØ±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø®Ø·Ø£ 429
     *
     * ttl: 60 = ÙØªØ±Ø© 60 Ø«Ø§Ù†ÙŠØ©
     * limit: 100 = Ø£Ù‚ØµÙ‰ 100 Ø·Ù„Ø¨
     *
     * Ø§Ù„Ù†ØªÙŠØ¬Ø©: 100 Ø·Ù„Ø¨ ÙÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰
     */
    ThrottlerModule.forRootAsync({
      inject: [ConfigService],
      useFactory: (configService: ConfigService) => ({
        throttlers: [
          {
            ttl: configService.get<number>('THROTTLE_TTL', 60) * 1000, // ms
            limit: configService.get<number>('THROTTLE_LIMIT', 100),
          },
        ],
      }),
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // 8ï¸âƒ£ Feature Modules - ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ÙŠØ²Ø§Øª
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    /**
     * ØªØ±ØªÙŠØ¨ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ù…Ù‡Ù…!
     * 
     * ğŸ“Œ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª:
     *   Auth â”€â”€â”€â”€â”€â–º Users â”€â”€â”€â”€â”€â–º Tenants
     *                              â”‚
     *           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     *           â”‚                                     â”‚
     *        Stores                              Channels
     *           â”‚                                     â”‚
     *        Webhooks â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     *           â”‚
     *        Messaging â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI
     *           â”‚
     *    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     *    â”‚             â”‚
     * Campaigns     Inbox
     *    â”‚             â”‚
     *    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     *           â”‚
     *      Analytics â”€â”€â”€â–º Billing
     */
    
    // ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
    AuthModule,
    UsersModule,
    TenantsModule,
    
    // ğŸª Ø§Ù„Ù…ØªØ§Ø¬Ø± ÙˆØ§Ù„Ù‚Ù†ÙˆØ§Øª
    StoresModule,
    ChannelsModule,
    WhatsAppModule, // âœ… ØªØ­Ù…ÙŠÙ„ WhatsApp routes Ù…Ø¨Ø§Ø´Ø±Ø© (webhook, send/text, etc.)
    WebhooksModule,
    
    // ğŸ’¬ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
    MessagingModule,
    AiModule,
    
    // ğŸ“£ Ø§Ù„Ø­Ù…Ù„Ø§Øª ÙˆØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø±Ø¯
    CampaignsModule,
    InboxModule,
    
    // ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±
    AnalyticsModule,
    BillingModule,

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ“¦ NEW Modules - Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    // ğŸ“ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ ÙˆØ§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¢Ù„ÙŠØ©
    TemplatesModule,
    AutomationsModule,
    
    // ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„ØªØµÙ†ÙŠÙØ§Øª
    ContactsModule,
    TagsModule,
    
    // ğŸ”— Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª (Ø³Ù„Ø©ØŒ Ø²Ø¯ØŒ Ø´ÙˆØ¨ÙŠÙØ§ÙŠ)
    IntegrationsModule,
    
    // âš¡ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
    QuickRepliesModule,
    
    // â­ Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
    CsatModule,
    
    // âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
    SettingsModule,

    // ğŸ”Œ WebSocket Gateway
    GatewayModule,

    // ğŸ“§ Mail Module Ù„Ù„Ù€ OTP
    MailModule,
  ],

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // Controllers
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  controllers: [
    HealthController, // ÙØ­Øµ ØµØ­Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
  ],

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // Providers - Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„Ù€ Guards Ø§Ù„Ø¹Ø§Ù…Ø©
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  providers: [
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Global Guards - Ø§Ù„Ø­Ø±Ø§Ø³ Ø§Ù„Ø¹Ø§Ù…ÙˆÙ†
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    /**
     * ThrottlerGuard - ÙŠÙØ·Ø¨Ù‚ Rate Limiting
     *
     * ÙŠÙØ­Øµ ÙƒÙ„ Ø·Ù„Ø¨: Ù‡Ù„ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ØŸ
     * Ù†Ø¹Ù… = Ø±ÙØ¶ Ø¨Ø®Ø·Ø£ 429
     * Ù„Ø§ = Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù…Ø±ÙˆØ±
     */
    {
      provide: APP_GUARD,
      useClass: ThrottlerGuard,
    },
  ],
})
export class AppModule implements NestModule {
  /**
   * configure - Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù€ Middleware
   *
   * NestModule = Interface ÙŠØ¬Ø¨Ø±Ù†Ø§ Ø¹Ù„Ù‰ ØªÙ†ÙÙŠØ° configure()
   *
   * Middleware vs Interceptor:
   * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   * Middleware: ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Express level (Ù‚Ø¨Ù„ NestJS)
   * Interceptor: ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ NestJS level (Ø£ÙƒØ«Ø± ØªÙƒØ§Ù…Ù„Ø§Ù‹)
   *
   * Middleware Ø£ÙØ¶Ù„ Ù„Ù€:
   * - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
   * - Ø¥Ø¶Ø§ÙØ© headers
   * - Ù…Ø¹Ø§Ù„Ø¬Ø© CORS (Ù„ÙƒÙ† NestJS Ù„Ø¯ÙŠÙ‡ Ø·Ø±ÙŠÙ‚Ø© Ø£Ø³Ù‡Ù„)
   */
  configure(consumer: MiddlewareConsumer): void {
    consumer
      // Ø§Ù„Ù€ Middleware Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ·Ø¨ÙŠÙ‚Ù‡
      .apply(RequestLoggerMiddleware)
      // ØªØ·Ø¨ÙŠÙ‚Ù‡ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª
      .forRoutes('*');
  }
}
