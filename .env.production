# ═══════════════════════════════════════════════════════════════════════════════
# ملف متغيرات البيئة - Environment Variables
# ═══════════════════════════════════════════════════════════════════════════════
#
# ✅ هذا الملف معدّل للإنتاج (Production)
# ⚠️ لا ترفع ملف .env إلى Git أبداً!
#
# ═══════════════════════════════════════════════════════════════════════════════


# ─────────────────────────────────────────────────────────────────────────────
# 🏠 إعدادات التطبيق الأساسية
# ─────────────────────────────────────────────────────────────────────────────

APP_NAME=Rafiq
NODE_ENV=production
PORT=3000

# روابط الإنتاج
API_BASE_URL=https://api.rafeq.ai
FRONTEND_URL=https://rafeq.ai

# خلف Proxy (Render/Railway/etc)
TRUST_PROXY=true


# ─────────────────────────────────────────────────────────────────────────────
# 🗄️ قاعدة البيانات PostgreSQL
# ─────────────────────────────────────────────────────────────────────────────

DB_HOST=localhost
DB_PORT=5432
DB_NAME=rafiq_db
DB_USERNAME=rafiq_user
DB_PASSWORD=rafiq_secret_password

# إعدادات الإنتاج
DB_SSL=true
DB_SYNCHRONIZE=false
DB_LOGGING=false


# ─────────────────────────────────────────────────────────────────────────────
# 🔴 خادم Redis
# ─────────────────────────────────────────────────────────────────────────────

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CACHE_TTL=3600
REDIS_TLS=false


# ─────────────────────────────────────────────────────────────────────────────
# 🔑 المصادقة (Authentication) - JWT
# ─────────────────────────────────────────────────────────────────────────────

# ⚠️ غيّر هذا المفتاح في الإنتاج!
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ACCESS_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d


# ─────────────────────────────────────────────────────────────────────────────
# 🛒 منصة سلة (Salla) - ✅ معدّل
# ─────────────────────────────────────────────────────────────────────────────

# معرف التطبيق في سلة (Client ID)
SALLA_CLIENT_ID=3b08c0dd-9b32-4e60-83be-b7328573527d

# المفتاح السري للتطبيق (Client Secret)
SALLA_CLIENT_SECRET=2e4a910614d5cc2c91269cca96a42df8a526481ecb97bd4aa65bc6c817478d3e

# رابط إعادة التوجيه بعد OAuth - للإنتاج
SALLA_REDIRECT_URI=https://api.rafeq.ai/api/stores/salla/callback
SALLA_OAUTH_CALLBACK_URL=https://api.rafeq.ai/api/stores/salla/callback

# المفتاح السري للتحقق من Webhooks - ✅ معدّل
SALLA_WEBHOOK_SECRET=20713044b04cdb3231671bdc53a407bc111a8db83b031b973974f7de872fafaf

# رابط API سلة
SALLA_API_URL=https://api.salla.dev/admin/v2


# ─────────────────────────────────────────────────────────────────────────────
# 🏪 منصة زد (Zid)
# ─────────────────────────────────────────────────────────────────────────────

ZID_CLIENT_ID=
ZID_CLIENT_SECRET=
ZID_REDIRECT_URI=https://api.rafeq.ai/api/stores/zid/callback
ZID_OAUTH_CALLBACK_URL=https://api.rafeq.ai/api/stores/zid/callback
# ⚠️ Zid does NOT use webhook signatures (unlike Salla)
# Reserved for future use if Zid adds HMAC signature support
ZID_WEBHOOK_SECRET=
ZID_API_URL=https://api.zid.sa/v1


# ─────────────────────────────────────────────────────────────────────────────
# 💬 واتساب (WhatsApp Business API)
# ─────────────────────────────────────────────────────────────────────────────

META_APP_ID=
META_APP_SECRET=
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_BUSINESS_ACCOUNT_ID=
WHATSAPP_WEBHOOK_VERIFY_TOKEN=
WHATSAPP_API_VERSION=v18.0


# ─────────────────────────────────────────────────────────────────────────────
# 🎮 ديسكورد (Discord Bot)
# ─────────────────────────────────────────────────────────────────────────────

DISCORD_BOT_TOKEN=
DISCORD_APPLICATION_ID=
DISCORD_PUBLIC_KEY=


# ─────────────────────────────────────────────────────────────────────────────
# 🤖 الذكاء الاصطناعي - OpenAI
# ─────────────────────────────────────────────────────────────────────────────

OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7


# ─────────────────────────────────────────────────────────────────────────────
# 💳 الدفع - Stripe
# ─────────────────────────────────────────────────────────────────────────────

STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret


# ─────────────────────────────────────────────────────────────────────────────
# 💳 الدفع - مُيسّر (Moyasar)
# ─────────────────────────────────────────────────────────────────────────────

MOYASAR_SECRET_KEY=sk_test_your_moyasar_secret_key
MOYASAR_PUBLISHABLE_KEY=pk_test_your_moyasar_publishable_key
MOYASAR_WEBHOOK_SECRET=


# ─────────────────────────────────────────────────────────────────────────────
# 📧 البريد الإلكتروني (SMTP)
# ─────────────────────────────────────────────────────────────────────────────

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@rafeq.ai
SMTP_FROM_NAME=Rafiq


# ─────────────────────────────────────────────────────────────────────────────
# 📊 المراقبة والتتبع (Monitoring)
# ─────────────────────────────────────────────────────────────────────────────

SENTRY_DSN=
LOG_LEVEL=warn


# ─────────────────────────────────────────────────────────────────────────────
# 🔒 الأمان (Security)
# ─────────────────────────────────────────────────────────────────────────────

CORS_ORIGINS=https://rafeq.ai,https://www.rafeq.ai,https://app.rafeq.ai
THROTTLE_TTL=60
THROTTLE_LIMIT=100
APP_SECRET=your-app-secret-change-in-production

# ✅ Webhook IP allowlist (Salla + Zid confirmed IPs)
WEBHOOK_ALLOWED_IPS=18.157.170.48,18.157.156.218,108.128.244.94


# ─────────────────────────────────────────────────────────────────────────────
# 📁 التخزين السحابي (S3-Compatible)
# ─────────────────────────────────────────────────────────────────────────────

STORAGE_TYPE=local
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=rafiq-storage
S3_REGION=me-south-1
S3_ENDPOINT=


# ─────────────────────────────────────────────────────────────────────────────
# 🧪 إعدادات الإنتاج
# ─────────────────────────────────────────────────────────────────────────────

SWAGGER_ENABLED=false
DEBUG=false
